var qsnark=function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e){e.ACCESS_KEY="",e.SECRET_KEY="",e.PHONE="",e.PASSWORD=""},function(t,e,o){t.exports={core:o(2),conf:o(0)}},function(t,e,o){var n=o(3),r=o(4),s=o(5);function c(t){this.Tokens=t||new s.Tokens}e.Qsnack=c,c.prototype.getAccessToken=function(t){var e=this,o=r.HOST+r.GET_ACCESS_TOKEN_API;n.postform(o,null,this.Tokens.toArgs(),function(o,n,r){o||200!=n.statusCode?console.error(o,n.statusCode):(window.localStorage.setItem("access_token_time",Date.now()),e.Tokens.setToken(JSON.parse(r)),console.log("获得AccessToken:",e.Tokens.getAccessToken()),t&&t())})},c.prototype.refreshAccessToken=function(){var t=r.HOST+r.REFRESH_ACCESS_TOKEN_API,e={refresh_token:this.Tokens.token.refresh_token,client_id:this.Tokens.accessKey,client_secret:this.Tokens.secretKey},o=this;n.postform(t,null,e,function(t,e,n){t||200!=e.statusCode?console.error(t,e.statusCode):(o.Tokens.setToken(JSON.parse(n)),console.log("刷新AccessToken:",o.Tokens.getAccessToken()))})},c.prototype.authWrapper=function(t){var e=this,o=window.localStorage.getItem("access_token_time"),n=Date.now();!e.Tokens.token||n-o>=72e5?this.getAccessToken(function(){t(e.Tokens)}):t(e.Tokens)},c.prototype.queryBlock=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.QUERY_BLCOK_API+"?type="+t+"&value="+e;n.get(c,s,o)})},c.prototype.queryBlockPage=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.QUERY_BLCOK_PAGE_API+"?index="+t+"&pageSize="+e;n.get(c,s,o)})},c.prototype.queryBlockRange=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.QUERY_BLCOK_RANGE_API+"?from="+t+"&to="+e;n.get(c,s,o)})},c.prototype.compileContract=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.COMPILE_CONTRACT_API,c={CTCode:t};n.postjson(s,o,c,e)})},c.prototype.deployContract=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.DEPLOY_CONTRACT_API,a={Bin:t,From:e};n.postjson(c,s,a,o)})},c.prototype.deployContractSync=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.DEPLOY_CONTRACT_SYNC_API,a={Bin:t,From:e};n.postjson(c,s,a,o)})},c.prototype.getPayload=function(t,e,o,s){this.authWrapper(function(c){var a=r.HOST+r.GET_PAYLOAD_API,i={Abi:t,Args:e,Func:o};n.postjson(a,c,i,s)})},c.prototype.invokeContract=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.INVOKE_CONTRACT_API;n.postjson(s,o,t,e)})},c.prototype.invokeContractSync=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.INVOKE_CONTRACT_API;n.postjson(s,o,t,e)})},c.prototype.maintainContract=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.MAINTAIN_CONTRACT_API;n.postjson(s,o,t,e)})},c.prototype.contractStatus=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.CONTRACT_STATUS_API+"?address="+t;n.get(s,o,e)})},c.prototype.transactionCount=function(t){this.authWrapper(function(e){var o=r.HOST+r.TRANSACTION_COUNT_API;n.get(o,e,t)})},c.prototype.queryTransaction=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.QUERY_TRANSACTION_API+"?hash="+t;n.get(s,o,e)})},c.prototype.transactionTxreceipt=function(t,e){this.authWrapper(function(o){var s=r.HOST+r.TRANSACTION_TXRECEIPT_API+"?txhash="+t;n.get(s,o,e)})},c.prototype.discardTransaction=function(t,e,o){this.authWrapper(function(s){var c=r.HOST+r.DISCARD_TRANSACTION_API+"?start="+t+"&end="+e;n.get(c,s,o)})},c.prototype.createAccount=function(t){this.authWrapper(function(e){var o=r.HOST+r.CREATE_ACCOUNT_API;n.get(o,e,t)})}},function(t,e){function o(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)return 200===o.status?e(void 0,{statusCode:o.status},o.responseText):e(o.status,{statusCode:o.status},o.responseText)},o.open(t.method,t.url,!0),o.setRequestHeader("Authorization",t.headers.Authorization),"POST"===t.method?(o.setRequestHeader("Content-Type",t.headers["Content-Type"]),o.send(t.body)):o.send()}e.get=function(t,e,n){o({url:t,method:"GET",headers:{Authorization:e?e.getAccessToken():""}},function(t,e,o){n(t,e,o)})},e.postjson=function(t,e,n,r){o({url:t,method:"POST",headers:{"Content-Type":"application/json",Authorization:e?e.getAccessToken():""},body:JSON.stringify(n)},function(t,e,o){r(t,e,o)})},e.postform=function(t,e,n,r){o({url:t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:e?e.getAccessToken():""},body:function(t){var e="";for(var o in t)e+=o+"="+t[o]+"&";return e}(n)},function(t,e,o){r(t,e,o)})}},function(t,e){e.HOST="https://dev.hyperchain.cn",e.GET_ACCESS_TOKEN_API="/v1/token/gtoken",e.REFRESH_ACCESS_TOKEN_API="/v1/token/rtoken",e.QUERY_BLCOK_API="/v1/dev/block/query",e.QUERY_BLCOK_PAGE_API="/v1/dev/blocks/page",e.QUERY_BLCOK_RANGE_API="/v1/dev/blocks/range",e.COMPILE_CONTRACT_API="/v1/dev/contract/compile",e.DEPLOY_CONTRACT_API="/v1/dev/contract/deploy",e.DEPLOY_CONTRACT_SYNC_API="/v1/dev/contract/deploysync",e.GET_PAYLOAD_API="/v1/dev/payload",e.INVOKE_CONTRACT_API="/v1/dev/contract/invoke",e.INVOKE_CONTRACT_SYNC_API="/v1/dev/contract/invokesync",e.MAINTAIN_CONTRACT_API="/v1/dev/contract/maintain",e.CONTRACT_STATUS_API="/v1/dev/contract/status",e.TRANSACTION_COUNT_API="/v1/dev/transaction/count",e.QUERY_TRANSACTION_API="/v1/dev/transaction/query",e.TRANSACTION_TXRECEIPT_API="/v1/dev/transaction/txreceipt",e.DISCARD_TRANSACTION_API="/v1/dev/transactions/discard",e.CREATE_ACCOUNT_API="/v1/dev/account/create"},function(t,e,o){var n=o(0);function r(t,e,o,r){this.accessKey=t||n.ACCESS_KEY,this.secretKey=e||n.SECRET_KEY,this.phone=e||n.PHONE,this.password=r||n.PASSWORD,this.token=null}e.Tokens=r,r.prototype.toArgs=function(){return{phone:this.phone,password:this.password,client_id:this.accessKey,client_secret:this.secretKey}},r.prototype.setToken=function(t){this.token=t},r.prototype.getAccessToken=function(){return this.token.access_token},r.prototype.getRefreshToken=function(){return this.token.refresh_token}}]);
//# sourceMappingURL=js-qsnark-sdk.js.map