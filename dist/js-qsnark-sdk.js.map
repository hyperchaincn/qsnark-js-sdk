{"version":3,"sources":["webpack://qsnark/webpack/bootstrap","webpack://qsnark/./qsnart/conf.js","webpack://qsnark/./index.js","webpack://qsnark/./qsnart/api.js","webpack://qsnark/./qsnart/http/http.js","webpack://qsnark/./qsnart/constant.js","webpack://qsnark/./qsnart/token/token.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ACCESS_KEY","SECRET_KEY","PHONE","PASSWORD","core","conf","http","addr","token","Qsnack","tokens","this","Tokens","getAccessToken","callback","url","HOST","GET_ACCESS_TOKEN_API","postform","toArgs","error","response","body","statusCode","console","window","localStorage","setItem","Date","now","setToken","JSON","parse","log","refreshAccessToken","REFRESH_ACCESS_TOKEN_API","data","refresh_token","client_id","accessKey","client_secret","secretKey","authWrapper","func","access_token_time","getItem","queryBlock","type","QUERY_BLCOK_API","queryBlockPage","index","pageSize","QUERY_BLCOK_PAGE_API","queryBlockRange","from","to","QUERY_BLCOK_RANGE_API","compileContract","code","COMPILE_CONTRACT_API","CTCode","postjson","deployContract","bin","DEPLOY_CONTRACT_API","Bin","From","deployContractSync","DEPLOY_CONTRACT_SYNC_API","getPayload","abi","args","GET_PAYLOAD_API","Abi","Args","Func","invokeContract","INVOKE_CONTRACT_API","invokeContractSync","maintainContract","MAINTAIN_CONTRACT_API","contractStatus","address","CONTRACT_STATUS_API","transactionCount","TRANSACTION_COUNT_API","queryTransaction","hash","QUERY_TRANSACTION_API","transactionTxreceipt","txhash","TRANSACTION_TXRECEIPT_API","discardTransaction","start","end","DISCARD_TRANSACTION_API","createAccount","CREATE_ACCOUNT_API","request","options","httpRequest","XMLHttpRequest","onreadystatechange","readyState","status","undefined","responseText","open","method","setRequestHeader","headers","send","Authorization","requestData","Content-Type","stringify","result","getURLEncodeBody","INVOKE_CONTRACT_SYNC_API","phone","password","access_token","getRefreshToken"],"mappings":"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","file":"js-qsnark-sdk.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","exports.ACCESS_KEY = '';\nexports.SECRET_KEY = '';\nexports.PHONE = '';\nexports.PASSWORD = '';\n","module.exports = {\n  core: require('./qsnart/api.js'),\n  conf: require('./qsnart/conf.js')\n}\n// export function numToWord(num) {\n//   return num\n// };\n\n// export function wordToNum(word) {\n//   return num\n// };\n\n// module.exports = {\n//   core: require('./qsnart/api.js'),\n//   conf: require('./qsnart/conf.js')\n// }","var http = require('./http/http.js')\nvar addr = require('./constant.js')\nvar token = require('./token/token.js')\n\nexports.Qsnack = Qsnack\n\nfunction Qsnack(tokens){\n    this.Tokens = tokens || new token.Tokens()\n}\n\n// 获取Access Token\nQsnack.prototype.getAccessToken = function (callback) {\n  var c = this\n  var url = addr.HOST+addr.GET_ACCESS_TOKEN_API\n  http.postform(url,null,this.Tokens.toArgs(),function(error,response,body){\n       if(!error && response.statusCode == 200){\n          window.localStorage.setItem('access_token_time',Date.now())\n          c.Tokens.setToken(JSON.parse(body))\n          console.log(\"获得AccessToken:\",c.Tokens.getAccessToken())\n          if(callback){\n            callback()\n          }\n       }else{\n          console.error(error,response.statusCode);\n       }\n    })\n};\n\n// 刷新Access Token\nQsnack.prototype.refreshAccessToken = function () {\n  var url = addr.HOST + addr.REFRESH_ACCESS_TOKEN_API\n  var data = {\n    \"refresh_token\":this.Tokens.token.refresh_token,\n    \"client_id\":this.Tokens.accessKey,\n    \"client_secret\":this.Tokens.secretKey,\n  }\n  var c = this\n\n  http.postform(url,null,data,function(error,response,body){\n       if(!error && response.statusCode == 200){\n          c.Tokens.setToken(JSON.parse(body))\n          console.log(\"刷新AccessToken:\",c.Tokens.getAccessToken())\n       }else{\n          console.error(error,response.statusCode);\n       }\n  })\n}\n\nQsnack.prototype.authWrapper = function (func){\n  var c = this\n  var access_token_time = window.localStorage.getItem('access_token_time');\n  var now = Date.now();\n  if (!c.Tokens.token || now-access_token_time >= 7200000){\n     this.getAccessToken(function(){\n       func(c.Tokens)\n     })\n     return\n  }\n  func(c.Tokens)\n}\n\n// 查询区块信息\nQsnack.prototype.queryBlock = function (type,value,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.QUERY_BLCOK_API+\"?type=\"+type+\"&value=\"+value\n     http.get(url,token,callback)\n  })\n}\n\n// 查询区块信息(分页)\nQsnack.prototype.queryBlockPage = function (index,pageSize,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.QUERY_BLCOK_PAGE_API+\"?index=\"+index+\"&pageSize=\"+pageSize\n     http.get(url,token,callback)\n  })\n}\n\n// 按区间查询区块\nQsnack.prototype.queryBlockRange = function (from,to,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.QUERY_BLCOK_RANGE_API+\"?from=\"+from+\"&to=\"+to\n     http.get(url,token,callback)\n  })\n}\n\n// 编译合约\nQsnack.prototype.compileContract = function (code,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.COMPILE_CONTRACT_API\n     var data = {\n       \"CTCode\":code\n     }\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 部署合约\nQsnack.prototype.deployContract = function (bin,from,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.DEPLOY_CONTRACT_API\n     var data = {\n       \"Bin\":bin,\n       \"From\":from,\n     }\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 同步部署合约\nQsnack.prototype.deployContractSync = function (bin,from,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.DEPLOY_CONTRACT_SYNC_API\n     var data = {\n       \"Bin\":bin,\n       \"From\":from,\n     }\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 获取 Payload\n//调用合约需要转入合约方法与合约参数编码后的input字节码,该接口可为用户返回Payload\nQsnack.prototype.getPayload = function (abi,args,func,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.GET_PAYLOAD_API\n     var data = {\n       \"Abi\":abi,\n       \"Args\":args,\n       \"Func\":func,\n     }\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 调用合约\nQsnack.prototype.invokeContract = function (data,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.INVOKE_CONTRACT_API\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 同步调用合约\nQsnack.prototype.invokeContractSync = function (data,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.INVOKE_CONTRACT_API\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 合约维护\nQsnack.prototype.maintainContract = function (data,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.MAINTAIN_CONTRACT_API\n     http.postjson(url,token,data,callback)\n  })\n}\n\n// 合约状态\nQsnack.prototype.contractStatus = function (address,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.CONTRACT_STATUS_API+\"?address=\"+address\n     http.get(url,token,callback)\n  })\n}\n\n// 查询交易总数\nQsnack.prototype.transactionCount = function (callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.TRANSACTION_COUNT_API\n     http.get(url,token,callback)\n  })\n}\n\n// 查询交易信息\nQsnack.prototype.queryTransaction = function (hash,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.QUERY_TRANSACTION_API+\"?hash=\"+hash\n     http.get(url,token,callback)\n  })\n}\n\n// 交易信息回执\nQsnack.prototype.transactionTxreceipt = function (txhash,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.TRANSACTION_TXRECEIPT_API+\"?txhash=\"+txhash\n     http.get(url,token,callback)\n  })\n}\n\n// 非法交易\nQsnack.prototype.discardTransaction = function (start,end,callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.DISCARD_TRANSACTION_API+\"?start=\"+start+\"&end=\"+end\n     http.get(url,token,callback)\n  })\n}\n\n// 新建区块链账户\nQsnack.prototype.createAccount = function (callback) {\n  this.authWrapper(function(token){\n     var url = addr.HOST + addr.CREATE_ACCOUNT_API\n     http.get(url,token,callback)\n  })\n}\n","// var request = require('request')\nfunction request(options,callback){\n    \n    var httpRequest = new XMLHttpRequest();\n    httpRequest.onreadystatechange = function () { // 状态发生变化时，函数被回调\n        if (httpRequest.readyState === 4) { // 成功完成\n            // console.log('httpRequest',httpRequest)\n            // 判断响应结果:\n            if (httpRequest.status === 200) {\n                // 成功，通过responseText拿到响应的文本:\n                return callback(undefined, {statusCode:httpRequest.status},httpRequest.responseText);\n            } else {\n                // 失败，根据响应码判断失败原因:\n                return callback(httpRequest.status, {statusCode:httpRequest.status},httpRequest.responseText);\n            }\n        } else {\n            // HTTP请求还在继续...\n        }\n    }\n    httpRequest.open(options.method,options.url,true);\n    httpRequest.setRequestHeader(\"Authorization\",options.headers['Authorization']);\n\n    if(options.method==='POST'){\n        httpRequest.setRequestHeader(\"Content-Type\",options.headers['Content-Type']);\n        httpRequest.send(options.body) \n    } else {\n        httpRequest.send();\n    }\n}\nfunction getURLEncodeBody(data){\n     var result = '';\n     for(var key in data){\n        result += key+'='+data[key]+'&';\n     }\n     return result;\n}\n\nexports.get = function(url, tokens, callback){\n    request({\n        url: url,\n        method: \"GET\",\n        headers: {\n            \"Authorization\": tokens?tokens.getAccessToken():\"\",\n        },\n    }, function(error, response, body) {\n        callback(error, response, body)\n    });\n}\n\nexports.postjson = function(url, tokens, requestData, callback){\n    request({\n        url: url,\n        method: \"POST\",\n        headers: {\n            \"Content-Type\" : \"application/json\",\n            \"Authorization\": tokens?tokens.getAccessToken():\"\",\n        },\n        body: JSON.stringify(requestData)\n    }, function(error, response, body) {\n        callback(error, response, body)\n    });\n}\n\nexports.postform = function(url, tokens, requestData, callback){\n    request({\n        url: url,\n        method: \"POST\",\n        headers: {\n            \"Content-Type\" : \"application/x-www-form-urlencoded\",\n            \"Authorization\": tokens?tokens.getAccessToken():\"\",\n        },\n        body: getURLEncodeBody(requestData),\n    }, function(error, response, body) {\n        callback(error, response, body)\n    });\n}\n","\nexports.HOST = 'https://dev.hyperchain.cn'\n// token\nexports.GET_ACCESS_TOKEN_API = \"/v1/token/gtoken\"\nexports.REFRESH_ACCESS_TOKEN_API = \"/v1/token/rtoken\"\n\n// block\nexports.QUERY_BLCOK_API = \"/v1/dev/block/query\"\nexports.QUERY_BLCOK_PAGE_API = \"/v1/dev/blocks/page\"\nexports.QUERY_BLCOK_RANGE_API = \"/v1/dev/blocks/range\"\n\n// _CONTRACT\nexports.COMPILE_CONTRACT_API    = \"/v1/dev/contract/compile\"\nexports.DEPLOY_CONTRACT_API     = \"/v1/dev/contract/deploy\"\nexports.DEPLOY_CONTRACT_SYNC_API = \"/v1/dev/contract/deploysync\"\nexports.GET_PAYLOAD_API         = \"/v1/dev/payload\"\nexports.INVOKE_CONTRACT_API     = \"/v1/dev/contract/invoke\"\nexports.INVOKE_CONTRACT_SYNC_API = \"/v1/dev/contract/invokesync\"\nexports.MAINTAIN_CONTRACT_API   = \"/v1/dev/contract/maintain\"\nexports.CONTRACT_STATUS_API     = \"/v1/dev/contract/status\"\n\nexports.TRANSACTION_COUNT_API     = \"/v1/dev/transaction/count\"\nexports.QUERY_TRANSACTION_API     = \"/v1/dev/transaction/query\"\nexports.TRANSACTION_TXRECEIPT_API = \"/v1/dev/transaction/txreceipt\"\nexports.DISCARD_TRANSACTION_API   = \"/v1/dev/transactions/discard\"\n\n// account\nexports.CREATE_ACCOUNT_API = \"/v1/dev/account/create\"\n","var conf = require('../conf.js')\n\nexports.Tokens = Tokens;\n\nfunction Tokens(accessKey, secretKey, phone, password) {\n    this.accessKey = accessKey || conf.ACCESS_KEY;\n    this.secretKey = secretKey || conf.SECRET_KEY;\n    this.phone = secretKey || conf.PHONE;\n    this.password = password || conf.PASSWORD;\n\n    this.token = null\n    /*\n    Token\n    {\n      \"access_token\": \"P5EALRU-O_EIT1PEJAHYQG\",\n      \"expires_in\": 7200,\n      \"refresh_token\": \"HAGQZRWXWNYL3FNMC_UAXG\",\n      \"scope\": \"all\",\n      \"token_type\": \"\n    }\n    */\n}\n\nTokens.prototype.toArgs = function () {\n    return {\n      \"phone\":this.phone,\n      \"password\":this.password,\n      \"client_id\":this.accessKey,\n      \"client_secret\":this.secretKey,\n    }\n}\n\nTokens.prototype.setToken = function(token) {\n  this.token = token\n}\n\nTokens.prototype.getAccessToken = function () {\n    return this.token.access_token\n}\n\nTokens.prototype.getRefreshToken = function() {\n  return this.token.refresh_token\n}\n"],"sourceRoot":""}